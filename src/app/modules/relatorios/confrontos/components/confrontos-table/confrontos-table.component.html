<div class="vetorit-card">

  <div
      class="custom-card header-band flex align-items-center justify-content-between"
    >
  <!--div class="loading-wrapper" *ngIf="loading">
    <p-progressSpinner></p-progressSpinner>
  </!--div-->

  <p-accordion *ngIf="!loading && documentos.length"
               [multiple]="true">

    <!-- Painel por documento -->
    <p-accordion-panel
      *ngFor="let doc of documentos; trackBy: trackByDocumento"
      [value]="doc.documentoFiscalId">

      <p-accordion-header>
        {{ getDocumentoHeader(doc) }}
      </p-accordion-header>

      <p-accordion-content>

        <!-- Accordion interno por grupo -->
        <p-accordion [multiple]="true" class="confronto-inner-accordion">

          <p-accordion-panel
            *ngFor="let grupo of doc.grupos; trackBy: trackByGrupo"
            [value]="grupo.grupoInformacao">

            <p-accordion-header>
              {{ grupo.grupoInformacao }}
            </p-accordion-header>

            <p-accordion-content>

              <p-table [value]="grupo.itens"
                       dataKey="id"
                       class="confronto-table">
                <ng-template pTemplate="header">
                  <tr>
                    <th style="width: 70px;">Linha</th>
                    <th style="width: 80px;">CFOP</th>
                    <th>Campo</th>
                    <th>Valor Original</th>
                    <th>Valor Calculado</th>
                    <th style="width: 130px;">Diferen√ßa</th>
                    <th style="width: 180px;">Criado em</th>
                  </tr>
                </ng-template>

                <ng-template pTemplate="body" let-row>
                  <tr [ngClass]="{'row-falha': row.falha}">
                    <td>{{ row.lineCode || '-' }}</td>
                    <td>{{ row.cfop || '-' }}</td>
                    <td>{{ row.campo }}</td>
                    <td>{{ row.valorOriginal }}</td>
                    <td>{{ row.valorCalculado }}</td>
                    <td>
                      <p-tag
                        [severity]="getFalhaSeverity(row.falha)"
                        [value]="getFalhaLabel(row.falha, row.descricaoDiferenca)">
                      </p-tag>
                    </td>
                    <td>
                      {{ row.criadoEm | date:'dd/MM/yyyy HH:mm:ss' }}
                    </td>
                  </tr>
                </ng-template>
              </p-table>

            </p-accordion-content>
          </p-accordion-panel>

        </p-accordion>

      </p-accordion-content>
    </p-accordion-panel>

  </p-accordion>

</div>
  <div class="confronto-container">

  <!-- Loading -->
  

  <!-- Lista de documentos -->
  

  <!-- Sem dados -->
  <div class="empty-state"
       *ngIf="!loading && !documentos.length && !errorMsg">
    Nenhum confronto encontrado.
  </div>

</div>

</div>



